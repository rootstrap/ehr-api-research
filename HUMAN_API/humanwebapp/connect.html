<html>

<head>
    <title>Human API demo</title>
    <!-- includes the following script tag to import connectJs -->
    <script src="https://cdn.humanapi.co/humanapi-connect-client@latest.js"></script>

    <script>

        window.addEventListener("load", function () {

            console.log('LOADED!!');
            document.getElementById("connectBTN").onclick = function () {

                HumanConnect.open({
                    token: "session_token",
                    onClose: handleClose, // invoked when the user closes Connect
                    onConnectSource: handleConnect, // invoked when the user connects a source
                    onDisconnectSource: handleDisconnect, // invoked when the user disconnects a source
                });
            };

        });

        // Handler for Connect onClose option
        function handleClose(response) {
            var results = response.sessionResults;
            console.log("User closed connect widget", response);

            if (response.status === "SUCCESS") {
                console.log("User connected", results.connectedSources.length, "data sources");
            }
            else {
                console.log("Widget closed with error", response.status);
            }
        };

        function handleConnect(response) {
            console.log("Connected a source")
        };

        function handleDisconnect(response) {
            console.log("Disconnected a source")
        };


    </script>

</head>

<body>
    <h1>Human API demo</h1>
    <button id="connectBTN">Connect your health data</button>
</body>

</html>